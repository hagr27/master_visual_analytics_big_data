# Instalación de MongoDB usando Docker


### 1. Crear una carpeta para MongoDB
---

```bash
mkdir -p ~/mongo_data
cd ~/mongo_data
```
> Esta carpeta almacenará los datos de MongoDB.

### 2. Crear archivo docker-compose.yml
---

```yaml
version: "3.9"  # Versión de Docker Compose

services:

  mongodb:  # Servicio de MongoDB
    image: mongo:latest  # Imagen oficial de MongoDB (última versión)
    container_name: mongodb_03_db  # Nombre del contenedor
    restart: always  # Reinicia automáticamente si el contenedor falla
    environment:  # Variables de entorno para inicializar MongoDB
      MONGO_INITDB_ROOT_USERNAME: ${MONGO_USER}  # Usuario root desde .env
      MONGO_INITDB_ROOT_PASSWORD: ${MONGO_PASSWORD}  # Contraseña root desde .env
    ports:
      - "27017:27017"  # Mapea el puerto 27017 del contenedor al host (acceso desde fuera de Docker)
    volumes:
      - mongodb_data:/data/db  # Persistencia de datos en volumen Docker
    networks:
      - backend  # Conecta el contenedor a la red interna "backend"
    labels:  # Etiquetas para organizar o identificar contenedores
      project: 03_bases_datos
      role: database

volumes:
  mongodb_data:  # Volumen para almacenar datos de MongoDB

networks:
  backend:  # Red interna para los servicios de Docker Compose
```
### 3. Crear archivo .env
---

```yaml
MONGO_USER=user
MONGO_PASSWORD=user_pass
```
> **Comando:** `source .env`


###  4. Levantar MongoDB
```bash
sudo docker compose up -d

#Verificar que el contenedor está corriendo:
sudo docker ps

sudo docker exec -it mongodb mongosh -u ${MONGO_USER} -p ${MONGO_PASSWORD}
```

### 5. Opción B – Desde un cliente gráfico como MongoDB Compass
- Usa esta URI:
```bash
mongodb://{USER}:{PASS}@localhost:27017
mongodb://{USER}:{PASS}@localhost:27017/?authSource=admin
```

#### 6. comandos Docker
```bash
# Detener MongoDB:
sudo docker compose down

# Reiniciar:
sudo docker compose restart

# Ver logs:
sudo docker logs mongodb -f

# Esto borrará tu base de datos.
sudo docker compose down
sudo rm -rf data/
```